{% extends "default_layout.html" %}
{% block body %}
    <div class="row">
        <div class="col-sm-3 sidebar">
            {% include "sites/sidebar.html" %}
        </div>
        <div class="col-sm-9 content">
            <div class="dashhead">
                <div class="dashhead-titles">
                    <h6 class="dashhead-subtitle">Overview</h6>
                    <h2 class="dashhead-title">{{ site.name }}</h2>
                </div>
            </div>

            <hr class="m-t">

            <div class="row text-center">

                <div class="col-sm-6 col-lg-6 m-b">
                    <div class="statcard statcard-info">
                        <div class="p-a">
                            <span class="statcard-desc">Page views</span>
                            <h2 id="page-view" class="statcard-number">
                                {{ page_views }}
                            </h2>
                        </div>
                    </div>
                </div>

                <div class="col-sm-6 col-lg-6 m-b">
                    <div class="statcard statcard-success">
                        <div class="p-a">
                            <span class="statcard-desc">Unique IPs</span>
                            <h2 class="statcard-number">
                                {{ unique_ips }}
                            </h2>
                        </div>
                    </div>
                </div>

                <div class="col-sm-6 m-b-md">
                    <div class="w-lg m-x-auto">
                        <canvas id="browserChart" width="200" height="200"></canvas>
                    </div>
                    <h3>Browsers</h3>
                </div>

                <div class="col-lg-6 col-sm-12 m-b-md">
                    <div class="list-group text-left">
                        <h4 class="list-group-header">
                            Most visited pages
                        </h4>

                        {% for url, title, count in top_pages %}
                            <a class="list-group-item" href="#">
                                <span class="pull-right text-muted">{{ count }}</span>
                                {{ url }} {{ title }}
                            </a>
                        {% endfor %}

                    </div>
                    <a href="#" class="btn btn-primary-outline p-x">View all pages</a>
                </div>

            </div>

            <div class="hr-divider m-t-md m-b">
                <h3 class="hr-divider-content hr-divider-heading">Quick stats</h3>
            </div>

        </div>
    </div>

    <script type="text/javascript">
        var stats_url = "{{ url_for('site.api_stats', site_domain=site.domain) }}";
    </script>
{%  endblock %}